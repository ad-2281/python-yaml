---

image: python:3.9.12-buster

pipelines:
  default:
    - step:
        name: build all
        caches:
          - pip
        condition:
          changesets:
            includePaths:
              - Makefile
              - requirements.txt
              - "*.py"
              - "*.rst"
              - "docs/**"
              - "employees/**"
              - "tests/**"
              - "utils/**"
        script:
          - uname -a
          - apt-get update && apt-get install -y make python3-yaml
          - python --version
          - pip --version
          - pip install -Ur requirements.txt
          - make clean all
        artifacts:
          - target/dist/**
          - target/docs/html/**
